"""
import numpy as np
import urllib.request
import io
import csv
import re

# Higher order triangle rules could be found here from PHG
# A SET OF SYMMETRIC QUADRATURE RULES ON TRIANGLES AND TETRAHEDRA by Zhang, Cui, Liu (2009)
# http://lsec.cc.ac.cn/~tcui/myinfo/paper/quad.pdf
# http://lsec.cc.ac.cn/phg/download.htm


baseurl = 'https://people.sc.fsu.edu/~jburkardt/datasets/quadrature_rules_tri/'
rules = [
    ('strang1', 2), ('strang3', 3), ('strang5', 4),
    ('strang7', 5), ('strang8', 6), ('strang10', 7),
    ('toms612_19', 9), ('toms612_28', 11), ('toms706_37', 13)
]
pts_suffix = '_x.txt'
wts_suffix = '_w.txt'

def get_text(url):
    response = urllib.request.urlopen(url)
    return response.read()

def get_floats(page):
    return np.array([float(s) for s in page.decode('utf-8').split()])

def download_rule(rule):
    pts = get_floats(get_text(baseurl + rule[0] + pts_suffix))
    pts = pts.reshape((int(pts.shape[0] / 2), 2))
    wts = get_floats(get_text(baseurl + rule[0] + wts_suffix))
    return pts, wts

startcode = '''
import numpy as np
# The code below was generated by the code above
def get_tri_gauss(order):
    pts = None
    wts = None
    if order == 0:
        raise Exception("Bad triangular gauss order")'''
rulecode = '''
    elif order <= %s:
        pts = %s
        wts = %s'''
endcode = '''
    return np.array(pts), np.array(wts)'''

if __name__ == '__main__':
    code = startcode
    for r in rules:
        pts, wts = download_rule(r)
        code += rulecode % (r[1], pts.tolist(), wts.tolist())
    code += endcode
    print(code)
"""
import numpy as np
# The code below was generated by the code above

def get_tri_gauss(order):
    pts = None
    wts = None
    if order == 0:
        raise Exception("Bad triangular gauss order")
    elif order <= 2:
        pts = [[0.6666666666666666, 0.16666666666666666], [0.16666666666666666, 0.6666666666666666], [0.16666666666666666, 0.16666666666666666]]
        wts = [0.3333333333333333, 0.3333333333333333, 0.3333333333333333]
    elif order <= 3:
        pts = [[0.3333333333333333, 0.3333333333333333], [0.6, 0.2], [0.2, 0.6], [0.2, 0.2]]
        wts = [-0.5625, 0.5208333333333334, 0.5208333333333334, 0.5208333333333334]
    elif order <= 4:
        pts = [[0.816847572980459, 0.091576213509771], [0.091576213509771, 0.816847572980459], [0.091576213509771, 0.091576213509771], [0.10810301816807, 0.445948490915965], [0.445948490915965, 0.10810301816807], [0.445948490915965, 0.445948490915965]]
        wts = [0.109951743655322, 0.109951743655322, 0.109951743655322, 0.223381589678011, 0.223381589678011, 0.223381589678011]
    elif order <= 5:
        pts = [[0.3333333333333333, 0.3333333333333333], [0.7974269853530872, 0.10128650732345633], [0.10128650732345633, 0.7974269853530872], [0.10128650732345633, 0.10128650732345633], [0.05971587178976981, 0.47014206410511505], [0.47014206410511505, 0.05971587178976981], [0.47014206410511505, 0.47014206410511505]]
        wts = [0.225, 0.12593918054482717, 0.12593918054482717, 0.12593918054482717, 0.13239415278850616, 0.13239415278850616, 0.13239415278850616]
    elif order <= 6:
        pts = [[0.124949503233232, 0.437525248383384], [0.437525248383384, 0.124949503233232], [0.437525248383384, 0.437525248383384], [0.797112651860071, 0.165409927389841], [0.797112651860071, 0.037477420750088], [0.165409927389841, 0.797112651860071], [0.165409927389841, 0.037477420750088], [0.037477420750088, 0.797112651860071], [0.037477420750088, 0.165409927389841]]
        wts = [0.205950504760887, 0.205950504760887, 0.205950504760887, 0.063691414286223, 0.063691414286223, 0.063691414286223, 0.063691414286223, 0.063691414286223, 0.063691414286223]
    elif order <= 7:
        pts = [[0.333333333333333, 0.333333333333333], [0.479308067841923, 0.260345966079038], [0.260345966079038, 0.479308067841923], [0.260345966079038, 0.260345966079038], [0.869739794195568, 0.065130102902216], [0.065130102902216, 0.869739794195568], [0.065130102902216, 0.065130102902216], [0.638444188569809, 0.312865496004875], [0.638444188569809, 0.048690315425316], [0.312865496004875, 0.638444188569809], [0.312865496004875, 0.048690315425316], [0.048690315425316, 0.638444188569809], [0.048690315425316, 0.312865496004875]]
        wts = [-0.14957004446767, 0.175615257433204, 0.175615257433204, 0.175615257433204, 0.053347235608839, 0.053347235608839, 0.053347235608839, 0.077113760890257, 0.077113760890257, 0.077113760890257, 0.077113760890257, 0.077113760890257, 0.077113760890257]
    elif order <= 9:
        pts = [[0.3333333333333333, 0.3333333333333333], [0.02063496160252593, 0.489682519198737], [0.489682519198737, 0.02063496160252593], [0.489682519198737, 0.489682519198737], [0.125820817014129, 0.4370895914929355], [0.4370895914929355, 0.125820817014129], [0.4370895914929355, 0.4370895914929355], [0.6235929287619356, 0.1882035356190322], [0.1882035356190322, 0.6235929287619356], [0.1882035356190322, 0.1882035356190322], [0.9105409732110941, 0.04472951339445297], [0.04472951339445297, 0.9105409732110941], [0.04472951339445297, 0.04472951339445297], [0.741198598784498, 0.03683841205473626], [0.741198598784498, 0.22196298916076573], [0.03683841205473626, 0.741198598784498], [0.03683841205473626, 0.22196298916076573], [0.22196298916076573, 0.741198598784498], [0.22196298916076573, 0.03683841205473626]]
        wts = [0.0971357962827961, 0.03133470022713983, 0.03133470022713983, 0.03133470022713983, 0.07782754100477543, 0.07782754100477543, 0.07782754100477543, 0.0796477389272091, 0.0796477389272091, 0.0796477389272091, 0.0255776756586981, 0.0255776756586981, 0.0255776756586981, 0.0432835393772894, 0.0432835393772894, 0.0432835393772894, 0.0432835393772894, 0.0432835393772894, 0.0432835393772894]
    elif order <= 11:
        pts = [[0.3333333333333333, 0.3333333333333333], [0.9480217181434233, 0.02598914092828833], [0.02598914092828833, 0.9480217181434233], [0.02598914092828833, 0.02598914092828833], [0.8114249947041546, 0.0942875026479227], [0.0942875026479227, 0.8114249947041546], [0.0942875026479227, 0.0942875026479227], [0.0107264499655706, 0.4946367750172147], [0.4946367750172147, 0.0107264499655706], [0.4946367750172147, 0.4946367750172147], [0.5853132347709715, 0.2073433826145142], [0.2073433826145142, 0.5853132347709715], [0.2073433826145142, 0.2073433826145142], [0.1221843885990187, 0.4389078057004907], [0.4389078057004907, 0.1221843885990187], [0.4389078057004907, 0.4389078057004907], [0.6779376548825902, 0.04484167758913055], [0.6779376548825902, 0.27722066752827923], [0.04484167758913055, 0.6779376548825902], [0.04484167758913055, 0.27722066752827923], [0.27722066752827923, 0.6779376548825902], [0.27722066752827923, 0.04484167758913055], [0.8588702812826364, 0.0], [0.8588702812826364, 0.1411297187173636], [0.0, 0.8588702812826364], [0.0, 0.1411297187173636], [0.1411297187173636, 0.8588702812826364], [0.1411297187173636, 0.0]]
        wts = [0.0879773011622219, 0.00874431155373619, 0.00874431155373619, 0.00874431155373619, 0.03808157199393533, 0.03808157199393533, 0.03808157199393533, 0.01885544805613125, 0.01885544805613125, 0.01885544805613125, 0.072159697544741, 0.072159697544741, 0.072159697544741, 0.0693291387055372, 0.0693291387055372, 0.0693291387055372, 0.0410563154292886, 0.0410563154292886, 0.0410563154292886, 0.0410563154292886, 0.0410563154292886, 0.0410563154292886, 0.007362383783300573, 0.007362383783300573, 0.007362383783300573, 0.007362383783300573, 0.007362383783300573, 0.007362383783300573]
    elif order <= 13:
        pts = [[0.3333333333333333, 0.3333333333333333], [0.9502756629241056, 0.02486216853794722], [0.02486216853794722, 0.9502756629241056], [0.02486216853794722, 0.02486216853794722], [0.17161491492383535, 0.41419254253808235], [0.41419254253808235, 0.17161491492383535], [0.41419254253808235, 0.41419254253808235], [0.5394122436771904, 0.23029387816140479], [0.23029387816140479, 0.5394122436771904], [0.23029387816140479, 0.23029387816140479], [0.7721600366765325, 0.11391998166173371], [0.11391998166173371, 0.7721600366765325], [0.11391998166173371, 0.11391998166173371], [0.009085399949835354, 0.4954573000250823], [0.4954573000250823, 0.009085399949835354], [0.4954573000250823, 0.4954573000250823], [0.062277290305886995, 0.4688613548470565], [0.4688613548470565, 0.062277290305886995], [0.4688613548470565, 0.4688613548470565], [0.022076289653624404, 0.8513065041743485], [0.022076289653624404, 0.1266172061720271], [0.8513065041743485, 0.022076289653624404], [0.8513065041743485, 0.1266172061720271], [0.1266172061720271, 0.022076289653624404], [0.1266172061720271, 0.8513065041743485], [0.01862052280252097, 0.6894419707285913], [0.01862052280252097, 0.2919375064688878], [0.6894419707285913, 0.01862052280252097], [0.6894419707285913, 0.2919375064688878], [0.2919375064688878, 0.01862052280252097], [0.2919375064688878, 0.6894419707285913], [0.09650648129215923, 0.6358678594338728], [0.09650648129215923, 0.267625659273968], [0.6358678594338728, 0.09650648129215923], [0.6358678594338728, 0.267625659273968], [0.267625659273968, 0.09650648129215923], [0.267625659273968, 0.6358678594338728]]
        wts = [0.05173976606574413, 0.008007799555564802, 0.008007799555564802, 0.008007799555564802, 0.046868898981821644, 0.046868898981821644, 0.046868898981821644, 0.04659094018397649, 0.04659094018397649, 0.04659094018397649, 0.031016943313796383, 0.031016943313796383, 0.031016943313796383, 0.010791612736631274, 0.010791612736631274, 0.010791612736631274, 0.03219553424243162, 0.03219553424243162, 0.03219553424243162, 0.015445834210701583, 0.015445834210701583, 0.015445834210701583, 0.015445834210701583, 0.015445834210701583, 0.015445834210701583, 0.017822989923178663, 0.017822989923178663, 0.017822989923178663, 0.017822989923178663, 0.017822989923178663, 0.017822989923178663, 0.037038683681384625, 0.037038683681384625, 0.037038683681384625, 0.037038683681384625, 0.037038683681384625, 0.037038683681384625]
    return np.array(pts), np.array(wts)